name: Release

# on:
#   pull_request:
#     types: [closed]
#     branches:
#       - test-cicd # Only when merging into master

on:
  push:
    branches:
      - "github-actions"

jobs:
  release:
    name: Release
    if: contains(github.event.head_commit.message, 'update cicd')
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v3

      - name: Tag
        run: git tag v$(node -p "require('./package.json').version") --force && git push --tags --force
